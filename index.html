<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥ç¨‹ç®¡ç†ç³»çµ± - Construction Task Manager</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Arial, sans-serif; }
        body { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); min-height: 100vh; padding: 20px; color: #fff; }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 30px; color: #00d4ff; font-size: 2em; }
        .form-card { background: rgba(255,255,255,0.1); padding: 25px; border-radius: 15px; margin-bottom: 25px; backdrop-filter: blur(10px); }
        .form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px; }
        .form-group { display: flex; flex-direction: column; }
        label { margin-bottom: 5px; color: #aaa; font-size: 0.9em; }
        input, select, textarea { padding: 12px; border: none; border-radius: 8px; background: rgba(255,255,255,0.15); color: #fff; font-size: 1em; }
        input:focus, select:focus, textarea:focus { outline: none; background: rgba(255,255,255,0.25); }
        textarea { resize: vertical; min-height: 60px; }
        .btn { padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-size: 1em; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(135deg, #00d4ff, #0099cc); color: #fff; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(0,212,255,0.4); }
        .btn-danger { background: linear-gradient(135deg, #ff4757, #cc0022); color: #fff; }
        .task-list { display: grid; gap: 15px; }
        .task-card { background: rgba(255,255,255,0.1); padding: 20px; border-radius: 12px; backdrop-filter: blur(10px); border-left: 4px solid #00d4ff; }
        .task-card.priority-high { border-left-color: #ff4757; }
        .task-card.priority-medium { border-left-color: #ffa502; }
        .task-card.priority-low { border-left-color: #2ed573; }
        .task-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; }
        .åˆ¤é ­å { font-size: 1.2em; font-weight: bold; color: #00d4ff; }
        .å„ªå…ˆåº¦ { padding: 4px 12px; border-radius: 20px; font-size: 0.8em; }
        .å„ªå…ˆåº¦.high { background: #ff4757; }
        .å„ªå…ˆåº¦.medium { background: #ffa502; }
        .å„ªå…ˆåº¦.low { background: #2ed573; }
        .task-content { color: #ddd; margin-bottom: 10px; }
        .task-dates { display: flex; gap: 20px; font-size: 0.9em; color: #aaa; }
        .task-result { margin-top: 10px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px; }
        .task-actions { margin-top: 15px; display: flex; gap: 10px; }
        .filter-bar { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .filter-btn { padding: 8px 16px; border-radius: 20px; background: rgba(255,255,255,0.1); color: #fff; cursor: pointer; border: none; }
        .filter-btn.active { background: #00d4ff; color: #000; }
        .empty-state { text-align: center; padding: 40px; color: #666; }
        .å®Œæˆ { text-decoration: line-through; opacity: 0.6; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ—ï¸ å·¥ç¨‹ç®¡ç†ç³»çµ±</h1>
        
        <!-- æ–°å¢ä»»å‹™è¡¨å–® -->
        <div class="form-card">
            <h2 style="margin-bottom: 20px; color: #00d4ff;">â• æ–°å¢ä»»å‹™</h2>
            <div class="form-row">
                <div class="form-group">
                    <label>åˆ¤é ­å</label>
                    <select id="åˆ¤é ­å">
                        <option value="">é¸æ“‡åˆ¤é ­...</option>
                        <option value="PHM">PHM</option>
                        <option value="å‰µåŸº">å‰µåŸº</option>
                        <option value="æŒ¯æº">æŒ¯æº</option>
                        <option value="å‹è‰¯è¨˜">å‹è‰¯è¨˜</option>
                        <option value="æ—­æš‰">æ—­æš‰</option>
                        <option value="èšé¾">èšé¾</option>
                        <option value="å…¶ä»–">å…¶ä»–</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>å„ªå…ˆåº¦</label>
                    <select id="å„ªå…ˆåº¦">
                        <option value="high">ğŸ”´ é«˜</option>
                        <option value="medium" selected>ğŸŸ¡ ä¸­</option>
                        <option value="low">ğŸŸ¢ ä½</option>
                    </select>
                </div>
            </div>
            <div class="form-group" style="margin-bottom: 15px;">
                <label>éœ€è™•ç†å…§å®¹</label>
                <textarea id="éœ€è™•ç†å…§å®¹" placeholder="æè¿°éœ€è¦è™•ç†çš„å·¥ç¨‹äº‹é …..."></textarea>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>ç™¼ç¾å•é¡Œæ—¥æœŸ</label>
                    <input type="date" id="ç™¼ç¾å•é¡Œæ—¥æœŸ">
                </div>
                <div class="form-group">
                    <label>æˆªæ­¢æ—¥æœŸ</label>
                    <input type="date" id="æˆªæ­¢æ—¥æœŸ">
                </div>
            </div>
            <button class="btn btn-primary" onclick="addTask()">âœ… æ–°å¢ä»»å‹™</button>
        </div>

        <!-- ç¯©é¸å™¨ -->
        <div class="filter-bar">
            <button class="filter-btn active" onclick="filterTasks('all')">å…¨éƒ¨</button>
            <button class="filter-btn" onclick="filterTasks('high')">ğŸ”´ é«˜å„ªå…ˆåº¦</button>
            <button class="filter-btn" onclick="filterTasks('medium')">ğŸŸ¡ ä¸­å„ªå…ˆåº¦</button>
            <button class="filter-btn" onclick="filterTasks('low')">ğŸŸ¢ ä½å„ªå…ˆåº¦</button>
        </div>

        <!-- ä»»å‹™åˆ—è¡¨ -->
        <div id="taskList" class="task-list"></div>
    </div>

    <script>
        let tasks = JSON.parse(localStorage.getItem('constructionTasks') || '[]');

        function saveTasks() {
            localStorage.setItem('constructionTasks', JSON.stringify(tasks));
            renderTasks();
        }

        function addTask() {
            let foremanName = document.getElementById('åˆ¤é ­å').value;
            
            // å¦‚æœæ€å’—ã€Œå…¶ä»–ã€ï¼Œå½ˆçª—å•è‡ªé¸å
            if (foremanName === 'å…¶ä»–') {
                foremanName = prompt('è¼¸å…¥åˆ¤é ­åç¨±ï¼š', '');
                if (!foremanName) return; // å¦‚æœå†‡è¼¸å…¥å°±å””submit
            }
            
            const task = {
                id: Date.now(),
                åˆ¤é ­å: foremanName,
                å„ªå…ˆåº¦: document.getElementById('å„ªå…ˆåº¦').value,
                éœ€è™•ç†å…§å®¹: document.getElementById('éœ€è™•ç†å…§å®¹').value,
                ç™¼ç¾å•é¡Œæ—¥æœŸ: document.getElementById('ç™¼ç¾å•é¡Œæ—¥æœŸ').value,
                æˆªæ­¢æ—¥æœŸ: document.getElementById('æˆªæ­¢æ—¥æœŸ').value,
                è™•ç†çµæœ: '',
                å®Œæˆ: false,
                å»ºç«‹æ™‚é–“: new Date().toISOString()
            };

            if (!task.åˆ¤é ­å || !task.éœ€è™•ç†å…§å®¹) {
                alert('è«‹é¸æ“‡/è¼¸å…¥åˆ¤é ­ååŒå¡«å¯«éœ€è™•ç†å…§å®¹ï¼');
                return;
            }

            tasks.unshift(task);
            saveTasks();
            clearForm();
        }

        function clearForm() {
            document.getElementById('åˆ¤é ­å').value = '';
            document.getElementById('éœ€è™•ç†å…§å®¹').value = '';
            document.getElementById('ç™¼ç¾å•é¡Œæ—¥æœŸ').value = '';
            document.getElementById('æˆªæ­¢æ—¥æœŸ').value = '';
            document.getElementById('å„ªå…ˆåº¦').value = 'medium';
        }

        function deleteTask(id) {
            if (confirm('ç¢ºå®šåˆªé™¤å‘¢å€‹ä»»å‹™ï¼Ÿ')) {
                tasks = tasks.filter(t => t.id !== id);
                saveTasks();
            }
        }

        function toggleComplete(id) {
            const task = tasks.find(t => t.id === id);
            if (task) {
                task.å®Œæˆ = !task.å®Œæˆ;
                saveTasks();
            }
        }

        function updateResult(id) {
            const task = tasks.find(t => t.id === id);
            if (task) {
                task.è™•ç†çµæœ = prompt('è¼¸å…¥è™•ç†çµæœï¼š', task.è™•ç†çµæœ);
                saveTasks();
            }
        }

        function filterTasks(priority) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            renderTasks(priority);
        }

        function renderTasks(filter = 'all') {
            const container = document.getElementById('taskList');
            
            let filteredTasks = tasks;
            if (filter !== 'all') {
                filteredTasks = tasks.filter(t => t.å„ªå…ˆåº¦ === filter);
            }

            if (filteredTasks.length === 0) {
                container.innerHTML = '<div class="empty-state">æš«æ™‚å†‡ä»»å‹™</div>';
                return;
            }

            container.innerHTML = filteredTasks.map(task => `
                <div class="task-card priority-${task.å„ªå…ˆåº¦} ${task.å®Œæˆ ? 'å®Œæˆ' : ''}">
                    <div class="task-header">
                        <span class="åˆ¤é ­å">ğŸ‘· ${task.åˆ¤é ­å}</span>
                        <span class="å„ªå…ˆåº¦ ${task.å„ªå…ˆåº¦}">${task.å„ªå…ˆåº¦ === 'high' ? 'ğŸ”´ é«˜' : task.å„ªå…ˆåº¦ === 'medium' ? 'ğŸŸ¡ ä¸­' : 'ğŸŸ¢ ä½'}</span>
                    </div>
                    <div class="task-content">${task.éœ€è™•ç†å…§å®¹}</div>
                    <div class="task-dates">
                        <span>ğŸ“… ç™¼ç¾: ${task.ç™¼ç¾å•é¡Œæ—¥æœŸ || 'æœªå¡«'}</span>
                        <span>â° æˆªæ­¢: ${task.æˆªæ­¢æ—¥æœŸ || 'æœªå¡«'}</span>
                    </div>
                    ${task.è™•ç†çµæœ ? `<div class="task-result">âœ… è™•ç†çµæœ: ${task.è™•ç†çµæœ}</div>` : ''}
                    <div class="task-actions">
                        <button class="btn btn-primary" onclick="toggleComplete(${task.id})">${task.å®Œæˆ ? 'â†©ï¸ æœªå®Œæˆ' : 'âœ… å®Œæˆ'}</button>
                        <button class="btn" onclick="updateResult(${task.id})">ğŸ“ çµæœ</button>
                        <button class="btn btn-danger" onclick="deleteTask(${task.id})">ğŸ—‘ï¸ åˆªé™¤</button>
                    </div>
                </div>
            `).join('');
        }

        // åˆå§‹åŒ–
        renderTasks();
    </script>
</body>
</html>
